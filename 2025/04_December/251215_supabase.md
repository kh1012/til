---
type: "skill"
domain: "backend"
category: "baas"
topic: "supabase-integration"
updatedAt: "2025-12-15"

satisfaction:
score: 92
reason: 정적 데이터 기반 구조를 Supabase Auth + RDB 중심의 동적 시스템으로 전환하고, 인증·보안·마이그레이션까지 하나의 흐름으로 연결성공!

keywords:
 - "supabase"
 - "auth"
 - "email-otp"
 - "postgresql"
 - "rdb"

relatedCategories:
 - "nextjs"
 - "architecture"
 - "database"
 - "security"
---

# 정적 데이터에서 BaaS 기반 동적 시스템으로 전환하기

오늘은 Supabase를 기반으로 Auth → RDB 테이블 설계 → 정적 데이터 매칭 → 컬럼 확장 → 트리거 기반 마이그레이션 → Next.js API 연동까지 하나의 흐름으로 직접 구성했다.

그 결과, 컨플루언스에 파편적으로 쌓이던 데이터 수집 작업을  
단일 RDB + 인증 기반 시스템으로 통합할 수 있는 구조를 만들었다.

단순히 기능을 붙인 것이 아니라,  
정적 시스템을 동적 시스템으로 전환하는 전체 그림을 이해한 날이다.

### 1. Supabase Auth를 시스템의 시작점으로 바라보기

이메일 OTP 인증을 사용해 로그인 흐름을 구성했다.  
이 과정에서 Auth는 단순 로그인 기능이 아니라,  
RDB 접근을 위한 신원 증명의 출발점이라는 점.

인증이 존재해야만 데이터 접근과 보안 논의가 가능해진다.  

### 2. PostgreSQL(RDB) 테이블 설계

기존에는 정적 JSON과 문서 중심의 데이터였다.  
이를 RDB 테이블로 옮기면서 단순 이관이 아니라 의미 단위로 재구성했다.

컬럼은 질문에 답할 수 있도록 설계해야 한다는 관점이 생겼다.. (근데 참 어렵다.)

### 3. 정적 데이터와의 매칭 및 컬럼 확장

기존 정적 데이터와 의미적으로 매칭되는 기준을 잡고,  
필요한 정보는 컬럼으로 확장했다.

이 과정에서 RDB는 저장소가 아니라  
구조화된 사고를 강제하는 도구라는 점을 체감했다.

### 4. 트리거 기반 마이그레이션 구성

마이그레이션을 일회성 작업으로 두지 않았다.  
특정 조건에서 자동으로 데이터 정합성을 맞추는 트리거를 구성했다.

이로 인해 이후 데이터 유입에도 동일한 규칙을 유지할 수 있다.  
마이그레이션 코드를 스크립트로 삽입하고, supabaseClient를 직접 호출하여, 실제 데이터를 밀어 넣었다.  
SQL Editor에 trigger를 심어서 매칭되는 아이디가 가입을 하게 되면 데이터의 연결 구조를 구성 해주었다.  

### 5. RLS(Row Level Security) 이해와 적용

RLS를 실제로 적용하며  
“이 사용자가 이 row를 볼 수 있는가”를  
DB 스스로 판단하게 만들었다.

보안은 API 레벨이 아니라  
데이터 자체가 책임져야 한다는 관점이 명확해졌다.

### 6. Next.js API와의 연결

Supabase 쿼리를 Next.js API 로직으로 직접 작성했다.  
프론트엔드는 정적 데이터가 아닌  
실제 RDB 기반 데이터를 소비하는 구조로 전환됐다.

## 핵심 인사이트

- BaaS는 백엔드를 대신해주는 도구가 아니다
- Auth, RDB, RLS, Trigger는 하나의 흐름이다
- 프론트엔드 개발자라도 데이터와 보안을 이해해야 시스템을 설계할 수 있다

오늘은 기능을 붙인 날이 아니라,  
시스템을 바라보는 시야가 한 단계 올라가게 되었다.  
새로운 개념을 익히고 시행착오를 하는게 쉽진 않지만, 언제나 그렇듯 재미있군.
